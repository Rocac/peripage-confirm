<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Confirmación — PeriPage</title>
  <style>
    html, body { margin:0; height:100%; background:#eef2f7; display:grid; place-items:center; font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial; }
    .backdrop {
      position:fixed; inset:0; background:rgba(0,0,0,.5);
      display:grid; place-items:center; z-index:10;
    }
    .card {
      background:#fff; border-radius:16px; padding:22px 18px 18px;
      box-shadow:0 20px 50px rgba(0,0,0,.25);
      width:min(420px,92vw);
      animation:show .25s ease;
    }
    @keyframes show { from{transform:translateY(20px);opacity:0} to{transform:translateY(0);opacity:1} }
    .title { font-weight:800; font-size:18px; color:#101828; margin-bottom:8px; }
    .msg { color:#243248; line-height:1.45; font-size:15px; margin-bottom:20px; }
    .actions { display:grid; grid-template-columns:1fr 1fr; gap:12px; }
    .btn { padding:12px; border:0; border-radius:12px; font-weight:700; cursor:pointer; font-size:15px; }
    .btn-cancel { background:#f4f6fa; color:#1a2a43; }
    .btn-accept { background:#00a651; color:#fff; }
  </style>
</head>
<body>

  <div class="backdrop">
    <div class="card">
      <div class="title">Confirmación</div>
      <div class="msg">
        Vas a salir del navegador para continuar con la ejecución en la aplicación <b>PeriPage</b>.<br>
        ¿Deseas continuar?
      </div>
      <div class="actions">
        <button class="btn btn-cancel" id="btnCancel">Cancelar</button>
        <button class="btn btn-accept" id="btnAccept">Aceptar</button>
      </div>
    </div>
  </div>

  <script>
    const cancelBtn = document.getElementById('btnCancel');
    const acceptBtn = document.getElementById('btnAccept');
    const backdrop = document.querySelector('.backdrop');

    cancelBtn.onclick = () => backdrop.style.display = 'none';

    acceptBtn.onclick = () => {
      // Intenta abrir la app
      window.location.href = "peripage://open";

      // Si no se abre en 1 segundo → manda a la tienda
      setTimeout(() => {
        const ua = navigator.userAgent;
        if (/Android/i.test(ua))
          window.location.href = "https://play.google.com/store/apps/details?id=com.ileopard.peripage";
        else if (/iPhone|iPad|iPod/i.test(ua))
          window.location.href = "https://apps.apple.com/app/peripage/id1324910312";
      }, 1000);
    };
  </script>
</body>
</html>
